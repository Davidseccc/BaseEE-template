<?xml version='1.0' encoding='UTF-8' ?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>
        <h:outputText value="Importovat soubor"/>
    </title>
    <link rel="stylesheet" href="../../resources/css/style.css"/>
    <script>
        function start() {
            PF('downloadStatusDialog').show();
        }

        function stop() {
            PF('downloadStatusDialog').hide();
        }
    </script>

</h:head>


<h:form id="submitForm">

    <div class="input-container">
        <p:growl id="msgs" showDetail="true"/>

        <p:dataTable id="k-Data" var="kDatabseDAO" value="#{importKDataDialogView.kDatabaseDTOS}" editable="true"
                     editMode="cell"
                     resizableColumns="true" widgetVar="k-Data">
            <p:ajax event="cellEdit" listener="#{importKDataDialogView.onCellEdit}" update=":submitForm:msgs"/>

            <p:column headerText="Id">
                <p:cellEditor>
                    <f:facet name="output"><h:outputText value="#{kDatabseDAO.id}"
                                                         styleClass="#{idValidator.isValid(kDatabseDAO.id)? '' : 'notValid'}"/></f:facet>
                    <f:facet name="input"><p:inputText id="modelInput" value="#{kDatabseDAO.id}"
                                                       validator="#{idValidator.validate}"
                                                       style="width:96%"/></f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="Smile" style="max-width: 250px;">
                <p:cellEditor>
                    <f:facet name="output"><h:outputText value="#{kDatabseDAO.smiles}"
                                                         styleClass="#{smileValidator.isValid(kDatabseDAO.smiles)? '' : 'notValid'}"/></f:facet>
                    <f:facet name="input"><p:inputText value="#{kDatabseDAO.smiles}" style="width:96%"
                                                       label="smile"/></f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="Original codename">
                <p:cellEditor>
                    <f:facet name="output"><h:outputText value="#{kDatabseDAO.originalCodename}"
                                                         styleClass="#{codenameValidator.isValid(kDatabseDAO.originalCodename)? '' : 'notValid'}"/></f:facet>
                    <f:facet name="input"><p:inputText value="#{kDatabseDAO.originalCodename}" style="width:96%"
                                                       label="original codename"/></f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="Owner">
                <p:cellEditor>
                    <f:facet name="output"><h:outputText value="#{kDatabseDAO.owner}"
                                                         styleClass="#{ownerValidator.isValid(kDatabseDAO.owner)? '' : 'notValid'}"/></f:facet>
                    <f:facet name="input">
                        <h:selectOneMenu value="#{kDatabseDAO.owner}" style="width:100%">
                            <f:selectItems value="#{importKDataDialogView.owners}" var="owner" itemLabel="#{owner}"
                                           itemValue="#{owner}"/>
                        </h:selectOneMenu>
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="Melting point">
                <p:cellEditor>
                    <f:facet name="output"><h:outputText value="#{kDatabseDAO.meltingPoint}"
                                                         styleClass="#{meltingPointValidator.isValid(kDatabseDAO.meltingPoint)? '' : 'notValid'}"/></f:facet>
                    <f:facet name="input"><p:inputText value="#{kDatabseDAO.meltingPoint}"
                                                       validator="#{meltingPointValidator.validate}" style="width:96%"
                                                       label="melting point"/></f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="NMR" style="width:96%">
                <p:cellEditor>
                    <f:facet name="output"><h:outputText value="#{kDatabseDAO.NMR}"
                                                         styleClass="#{nmrValidator.isValid(kDatabseDAO.NMR)? '' : 'notValid'}"/></f:facet>
                    <f:facet name="input"><p:inputText value="#{kDatabseDAO.NMR}" style="width:96%"
                                                       label="NMR"/></f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="HRMS">
                <p:cellEditor>
                    <f:facet name="output"><h:outputText value="#{kDatabseDAO.HRMS}"
                                                         styleClass="#{hrmsValidator.isValid(kDatabseDAO.HRMS)? '' : 'notValid'}"/></f:facet>
                    <f:facet name="input"><p:inputText value="#{kDatabseDAO.HRMS}" style="width:96%"
                                                       label="HRMS"/></f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="Purity">
                <p:cellEditor>
                    <f:facet name="output"><h:outputText value="#{kDatabseDAO.purity}"
                                                         styleClass="#{purityValidator.isValid(kDatabseDAO.purity)? '' : 'notValid'}"/></f:facet>
                    <f:facet name="input"><p:inputText value="#{kDatabseDAO.purity}" style="width:96%"
                                                       validator="#{purityValidator.validate}"
                                                       label="purity"/></f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="Solubility">
                <p:cellEditor>
                    <f:facet name="output"><h:outputText value="#{kDatabseDAO.solubility}"
                                                         styleClass="#{solubilityValidator.isValid(kDatabseDAO.solubility)? '' : 'notValid'}"/></f:facet>
                    <f:facet name="input"><p:inputText value="#{kDatabseDAO.solubility}" style="width:96%"
                                                       label="solubility"/></f:facet>
                </p:cellEditor>
            </p:column>
            <p:column headerText="DOI">
                <p:cellEditor>
                    <f:facet name="output"><h:outputText value="#{kDatabseDAO.DOI}"
                                                         styleClass="#{dummyValidator.isValid(kDatabseDAO.DOI)? '' : 'notValid'}"/></f:facet>
                    <f:facet name="input"><p:inputText value="#{kDatabseDAO.DOI}" style="width:96%"
                                                       label="solubility"/></f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="alias">
                <p:cellEditor>
                    <f:facet name="output"><h:outputText value="#{kDatabseDAO.alasesList}"
                                                         styleClass="#{aliasValidator.isValid(kDatabseDAO.alasesList)? '' : 'notValid'}"/></f:facet>
                    <f:facet name="input"><p:inputText value="#{kDatabseDAO.alasesList}" style="width:96%"
                                                       label="solubility"/></f:facet>
                </p:cellEditor>
            </p:column>

            <p:column style="width:35px">
                <p:commandButton value="Delete" styleClass="ui-priority-primary" process="@this"
                                 update="k-Data" icon="fa fa-trash"
                                 action="#{importKDataDialogView.onRowRemove(kDatabseDAO)}"/>
            </p:column>
        </p:dataTable>

        <div class="ui-g">
            <div class="ui-g-12">
                <p:commandButton value="Add new row" styleClass="ui-priority-primary" process="@this"
                                 icon="fa fa-plus-circle" action="#{importKDataDialogView.onAddNew()}"
                                 oncomplete="PF('k-Data').addRow();"/>
            </div>
        </div>
    </div>
    <p:commandButton value="Uložit a zavřít"
                     action="#{importKDataDialogView.saveAndClose()}"
                     styleClass="topmargin-20"
                     validateClient="true"
                     icon="fa fa-save"
                     update="submitForm"/>

    <p:commandButton value="Zavřít"
                     immediate="true"
                     action="#{editUserDialog.close()}"/>
</h:form>
</html>